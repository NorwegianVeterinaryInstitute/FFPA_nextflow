manifest {
    author = 'Thomas Haverkamp'
    description = 'FullForcePlasmidAssembler: A python pipeline rewritten in Nextflow. The original pipeline can be found
		 							 here: https://github.com/MBHallgren/FullForcePlasmidAssembler'
    homePage = 'https://github.com/Thomieh73/FFPA_nextflow'
    nextflowVersion = '>=20.07.1.5412'
}

profiles {
    docker {
        docker.enabled = true
        docker.runOptions = '-u $(id -u):$(id -g)'
    }
    singularity {
        singularity.enabled = true
    }
		slurm {
			executor = 'slurm'
			clusterOptions = '--job-name=nepal --account=nn9305k --mem-per-cpu=4700M'
			queueSize = 24
			maxRetries = 1
			errorStrategy='retry'
		}
}


process {
		withName:'trimmomatic' {
			container = 'docker://fjukstad/trimmomatic'
			cpus = 2
      time = { 30m * task.attempt}
		}
		withName:'qcat' {
			container = 'docker://mcfonsecalab/qcat'
			cpus = 1
      time = { 30m * task.attempt}
		}
		withName:'nanoplot' {
			container = 'docker://nanozoo/nanoplot:1.32.0--1ae6f5d'
			cpus = 2
      time = { 30m * task.attempt}
		}
		withName:'fastqc' {
			container = 'docker://nanozoo/fastqc'
			cpus = 2
      time = { 30m * task.attempt}
		}
		withName:'nanofilt' {
			container = 'ocker://mcfonsecalab/nanofilt'
			cpus = 4
      time = { 30m * task.attempt}
		}
		withName:'kraken' {
			container = 'docker://flowcraft/kraken:1.0-0.1'
			cpus = 8
      time = { 30m * task.attempt}
		}
		withName:'unicycler' {
			container = 'docker://nanozoo/unicycler:0.4.7-0--c0404e6"'
			cpus = 8
      time = { 2h * task.attempt}
		}
		withName:'abricate' {
			container = 'docker://replikation/abricate'
			cpus = 8
      time = { 1h * task.attempt}
		}
